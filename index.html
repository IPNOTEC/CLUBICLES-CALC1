<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLUBICLES Investment & Unit Economics Calculator</title>
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --background-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #dee2e6;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--background-color);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        h2 {
            color: var(--secondary-color);
            margin-top: 30px;
            padding-bottom: 5px;
            border-bottom: 1px dashed var(--border-color);
        }

        .input-section, .output-section {
            margin-bottom: 20px;
        }

        /* --- Input Grid Styles --- */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            align-items: center;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        input[type="number"] {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            width: 90%;
            font-size: 1em;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        /* --- Table Styles (for Inputs and Outputs) --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 12px;
            text-align: right;
        }

        th:first-child, td:first-child {
            text-align: left;
            font-weight: bold;
            width: 40%;
        }

        th {
            background-color: var(--primary-color);
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        /* --- Output Styles --- */
        .output-value {
            font-size: 1.1em;
            font-weight: bold;
        }

        .metric-good { color: var(--success-color); }
        .metric-warn { color: var(--warning-color); }
        .metric-bad { color: var(--danger-color); }

        /* --- Tooltip Styles --- */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            color: var(--secondary-color);
            margin-left: 5px;
            font-weight: normal;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position the tooltip above the text */
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }

        /* --- Section Explanations --- */
        .explanation {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            font-size: 0.95em;
            border-left: 4px solid var(--primary-color);
        }

        /* --- Responsive Design --- */
        @media (max-width: 992px) {
            .input-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>CLUBICLES Investment & Unit Economics Calculator</h1>
    
    <h2>Step 2: Hub Distribution & Revenue Share (%)</h2>
    <table id="model-inputs">
        <thead>
            <tr>
                <th>Model</th>
                <th>Num Hubs (Target)</th>
                <th>Revenue Share (%) <span class="tooltip">(?)<span class="tooltiptext">The percentage of total hub revenue retained by CLUBICLES (for Operations and Support models).</span></span></th>
                <th>Monthly Revenue per Hub (₹) <span class="tooltip">(?)<span class="tooltiptext">The total expected monthly revenue generated by a single hub at full capacity.</span></span></th>
                <th>Monthly Opex per Hub (₹) <span class="tooltip">(?)<span class="tooltiptext">The monthly Operating Expenses (salaries, rent, utilities) for a single hub.</span></span></th>
                <th>Setup Cost per Hub (₹) <span class="tooltip">(?)<span class="tooltiptext">The one-time cost to make the hub operational (e.g., equipment, initial build-out).</span></span></th>
            </tr>
        </thead>
        <tbody>
            <tr data-model="full">
                <td>Full CLUBICLES (100% Share)</td>
                <td><input type="number" id="full-numHubs" value="2" min="0" oninput="calculateMetrics()"></td>
                <td>100</td>
                <td><input type="number" id="full-monthlyRevenue" value="320000" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="full-monthlyOpCost" value="180000" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="full-setupCost" value="1500000" min="0" oninput="calculateMetrics()"></td>
            </tr>
            <tr data-model="ops">
                <td>CLUBICLES Operations</td>
                <td><input type="number" id="ops-numHubs" value="5" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="ops-revenueShare" value="70" min="0" max="100" oninput="calculateMetrics()"></td>
                <td><input type="number" id="ops-monthlyRevenue" value="280000" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="ops-monthlyOpCost" value="100000" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="ops-setupCost" value="500000" min="0" oninput="calculateMetrics()"></td>
            </tr>
            <tr data-model="support">
                <td>CLUBICLES Support</td>
                <td><input type="number" id="support-numHubs" value="10" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="support-revenueShare" value="10" min="0" max="100" oninput="calculateMetrics()"></td>
                <td><input type="number" id="support-monthlyRevenue" value="250000" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="support-monthlyOpCost" value="70000" min="0" oninput="calculateMetrics()"></td>
                <td><input type="number" id="support-setupCost" value="200000" min="0" oninput="calculateMetrics()"></td>
            </tr>
        </tbody>
    </table>

    <h2>Step 3: Growth & Customer Economics</h2>
    <div class="input-grid">
        <div class="input-group">
            <label for="avg-occupancy">Average Occupancy Rate (%) <span class="tooltip">(?)<span class="tooltiptext">Average capacity utilized across all hubs.</span></span></label>
            <input type="number" id="avg-occupancy" value="75" min="0" max="100" oninput="calculateMetrics()">
        </div>
        <div class="input-group">
            <label for="monthly-growth">Monthly Growth Rate (%) <span class="tooltip">(?)<span class="tooltiptext">Expected Month-over-Month (MoM) revenue growth.</span></span></label>
            <input type="number" id="monthly-growth" value="8" min="0" oninput="calculateMetrics()">
        </div>
        <div class="input-group">
            <label for="monthly-churn">Monthly Churn Rate (%) <span class="tooltip">(?)<span class="tooltiptext">Percentage of customers lost each month. Used to determine Customer Lifetime.</span></span></label>
            <input type="number" id="monthly-churn" value="6" min="0" oninput="calculateMetrics()">
        </div>
        <div class="input-group">
            <label for="cac">Customer Acquisition Cost (CAC - ₹) <span class="tooltip">(?)<span class="tooltiptext">The average cost to acquire one paying customer.</span></span></label>
            <input type="number" id="cac" value="3000" min="0" oninput="calculateMetrics()">
        </div>
    </div>

    <h2>Step 4: Key Financial Metrics & Health</h2>
    <table id="financial-metrics">
        <thead>
            <tr>
                <th>Metric</th>
                <th>Value</th>
                <th>Threshold</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>LTV to CAC Ratio <span class="tooltip">(?)<span class="tooltiptext">Formula: Customer Lifetime Value / CAC. A measure of customer profitability. Ideal: > 3.0</span></span></td>
                <td id="ltv-cac-ratio" class="output-value metric-bad"></td>
                <td>> 3.0 is Healthy</td>
            </tr>
            <tr>
                <td>CAC Payback Period (Months) <span class="tooltip">(?)<span class="tooltiptext">Formula: CAC / (Monthly Net Revenue per Customer). Time to recover acquisition cost. Ideal: < 12 Months</span></span></td>
                <td id="cac-payback-period" class="output-value metric-bad"></td>
                <td>< 12 Months is Good</td>
            </tr>
            <tr>
                <td>Rule of 40 Score (%) <span class="tooltip">(?)<span class="tooltiptext">Formula: Monthly Growth % + Gross Margin %. A balance of growth and profitability. Ideal: > 40%</span></span></td>
                <td id="rule-of-40" class="output-value metric-bad"></td>
                <td>> 40% is Healthy</td>
            </tr>
            <tr>
                <td>Total Gross Margin (%) <span class="tooltip">(?)<span class="tooltiptext">Formula: (Total Revenue - Total COGS) / Total Revenue. Measures operational efficiency. Ideal: > 60%</span></span></td>
                <td id="gross-margin" class="output-value metric-bad"></td>
                <td>> 60% is Good</td>
            </tr>
        </tbody>
    </table>

    <h2>Step 5: Revenue & Cost Summary</h2>
    <table>
        <tr>
            <td>Total Monthly Revenue (₹)</td>
            <td id="total-revenue" class="output-value"></td>
        </tr>
        <tr>
            <td>Total Monthly Operating Cost (₹)</td>
            <td id="total-opex" class="output-value"></td>
        </tr>
        <tr>
            <td>Total Initial Setup Cost (₹)</td>
            <td id="total-setup-cost" class="output-value"></td>
        </tr>
        <tr>
            <td>Net Monthly Profit (EBITDA) (₹)</td>
            <td id="net-profit" class="output-value"></td>
        </tr>
        <tr>
            <td>Calculated Customer Lifetime (Months)</td>
            <td id="customer-lifetime" class="output-value"></td>
        </tr>
    </table>

    <h2>Step 1: Investment & Valuation Outputs</h2>
    <div class="input-grid">
        <div class="input-group">
            <label for="investment-amount">Investment Amount (₹) <span class="tooltip">(?)<span class="tooltiptext">Total capital you are raising from investors.</span></span></label>
            <input type="number" id="investment-amount" value="5000000" min="0" oninput="updateValuation()">
        </div>
        <div class="input-group">
            <label for="equity-stake">Equity Stake (%) <span class="tooltip">(?)<span class="tooltiptext">The percentage of the company being offered to the investor.</span></span></label>
            <input type="number" id="equity-stake" value="10" min="0" max="100" oninput="updateValuation()">
        </div>
        <div class="input-group">
            <label for="exit-multiple">Exit Multiple (on Revenue) <span class="tooltip">(?)<span class="tooltiptext">The projected valuation multiple at the time of investor exit (e.g., 8x revenue).</span></span></label>
            <input type="number" id="exit-multiple" value="8" min="0" oninput="updateValuation()">
        </div>
        <div class="input-group">
            <label for="exit-year">Exit Year <span class="tooltip">(?)<span class="tooltiptext">The expected year for the investment exit (usually 5-7 years).</span></span></label>
            <input type="number" id="exit-year" value="5" min="1" oninput="updateValuation()">
        </div>
    </div>
    
    <table>
        <tr>
            <td>Post-Money Valuation (₹) <span class="tooltip">(?)<span class="tooltiptext">Formula: Investment / (Equity Stake / 100)</span></span></td>
            <td id="post-money-valuation" class="output-value"></td>
        </tr>
        <tr>
            <td>**Projected Exit Revenue (₹, Year 5)**</td>
            <td id="projected-exit-revenue" class="output-value"></td>
        </tr>
        <tr>
            <td>**Investor Exit Value (₹)** <span class="tooltip">(?)<span class="tooltiptext">Formula: Projected Exit Revenue * Exit Multiple * Investor Equity %</span></span></td>
            <td id="investor-exit-value" class="output-value"></td>
        </tr>
        <tr>
            <td>**Multiple on Investment (x)** <span class="tooltip">(?)<span class="tooltiptext">Formula: Investor Exit Value / Initial Investment Amount</span></span></td>
            <td id="multiple-on-investment" class="output-value"></td>
        </tr>
    </table>

    <div class="explanation">
        <h3>Valuation Assumptions Explained</h3>
        <p><strong>Post-Money Valuation:</strong> This is the company's valuation after receiving the investment. It's calculated as: Investment Amount / (Equity Stake / 100).</p>
        <p><strong>Pre-Money Valuation:</strong> This is the company's valuation before the investment. It's calculated as: Post-Money Valuation - Investment Amount.</p>
        <p><strong>Projected Exit Revenue:</strong> This estimates future revenue based on current monthly revenue compounded at the monthly growth rate over the exit period.</p>
        <p><strong>Investor Exit Value:</strong> The estimated return for the investor at exit, calculated as: Projected Exit Revenue × Exit Multiple × Investor Equity %.</p>
        <p><strong>Multiple on Investment:</strong> How many times the investor's money will multiply by the exit year.</p>
    </div>

</div>

<script>
    // Helper function to format numbers as Indian currency
    const formatRupee = (num) => {
        if (num === null || isNaN(num)) return '₹ 0';
        return '₹ ' + Math.round(num).toLocaleString('en-IN');
    };

    // --- Core Calculation Functions ---

    function calculateMetrics() {
        // --- Input Parsing ---
        const models = ['full', 'ops', 'support'];
        let totalMonthlyRevenue = 0;
        let totalMonthlyOpex = 0;
        let totalInitialSetupCost = 0;

        // Model-Specific Calculations
        models.forEach(model => {
            const numHubs = parseFloat(document.getElementById(`${model}-numHubs`).value) || 0;
            const revenueShare = (model === 'full' ? 100 : parseFloat(document.getElementById(`${model}-revenueShare`).value)) / 100 || 0;
            const monthlyRevenue = parseFloat(document.getElementById(`${model}-monthlyRevenue`).value) || 0;
            const monthlyOpCost = parseFloat(document.getElementById(`${model}-monthlyOpCost`).value) || 0;
            const setupCost = parseFloat(document.getElementById(`${model}-setupCost`).value) || 0;

            // CLUBICLES Revenue & Opex (Based on Share)
            const clubiclesRevenue = monthlyRevenue * revenueShare;
            const clubiclesOpex = monthlyOpCost * (model === 'full' ? 1 : revenueShare); // Assume Opex scales with revenue share or is 100% for full model

            totalMonthlyRevenue += clubiclesRevenue * numHubs;
            totalMonthlyOpex += clubiclesOpex * numHubs; // Total opex is for the entire hub
            totalInitialSetupCost += setupCost * numHubs;
        });

        // Global Metrics
        const avgOccupancy = (parseFloat(document.getElementById('avg-occupancy').value) / 100) || 0;
        const monthlyGrowth = (parseFloat(document.getElementById('monthly-growth').value) / 100) || 0;
        const monthlyChurn = (parseFloat(document.getElementById('monthly-churn').value) / 100) || 0;
        const cac = parseFloat(document.getElementById('cac').value) || 0;
        
        // --- Step 5: Revenue & Cost Summary ---
        const effectiveTotalRevenue = totalMonthlyRevenue * avgOccupancy;
        const netProfit = effectiveTotalRevenue - totalMonthlyOpex;

        document.getElementById('total-revenue').textContent = formatRupee(effectiveTotalRevenue);
        document.getElementById('total-opex').textContent = formatRupee(totalMonthlyOpex);
        document.getElementById('total-setup-cost').textContent = formatRupee(totalInitialSetupCost);
        document.getElementById('net-profit').textContent = formatRupee(netProfit);

        // --- Step 4: Key Financial Metrics ---

        // 1. Customer Lifetime (L)
        const customerLifetimeMonths = monthlyChurn > 0 ? 1 / monthlyChurn : 0;
        document.getElementById('customer-lifetime').textContent = Math.round(customerLifetimeMonths) + ' months';

        // 2. Gross Margin (%)
        const totalCOGS = totalMonthlyOpex; // COGS approximated by Opex for service business
        const grossProfit = effectiveTotalRevenue - totalCOGS;
        const grossMargin = effectiveTotalRevenue > 0 ? (grossProfit / effectiveTotalRevenue) * 100 : 0;
        
        document.getElementById('gross-margin').textContent = grossMargin.toFixed(1) + '%';
        
        // 3. Rule of 40 (%)
        const ruleOf40 = (monthlyGrowth * 100) + grossMargin;
        document.getElementById('rule-of-40').textContent = ruleOf40.toFixed(1) + '%';
        
        // NOTE: We need a reasonable approximation for LTV (LTV/CAC and CAC Payback)
        // LTV = (Avg Revenue per Month * Gross Margin %) * Customer Lifetime (Months)
        // For simplicity, we assume an average revenue of ₹10,000 per customer for the total revenue calculation.
        const avgRevPerCustomer = 10000; 
        const avgNetRevPerCustomer = avgRevPerCustomer * (grossMargin/100);

        // LTV (Lifetime Value)
        const ltv = avgNetRevPerCustomer * customerLifetimeMonths;

        // LTV/CAC Ratio
        const ltvCacRatio = cac > 0 ? ltv / cac : 0;
        document.getElementById('ltv-cac-ratio').textContent = ltvCacRatio.toFixed(1) + 'x';
        
        // CAC Payback Period (Months)
        const cacPaybackPeriod = avgNetRevPerCustomer > 0 ? cac / avgNetRevPerCustomer : 0;
        document.getElementById('cac-payback-period').textContent = cacPaybackPeriod.toFixed(1);

        // Apply health coloring
        document.getElementById('ltv-cac-ratio').className = (ltvCacRatio >= 3.0) ? 'output-value metric-good' : (ltvCacRatio >= 1.5 ? 'output-value metric-warn' : 'output-value metric-bad');
        document.getElementById('cac-payback-period').className = (cacPaybackPeriod <= 12 && cacPaybackPeriod > 0) ? 'output-value metric-good' : (cacPaybackPeriod <= 18 ? 'output-value metric-warn' : 'output-value metric-bad');
        document.getElementById('rule-of-40').className = (ruleOf40 >= 40) ? 'output-value metric-good' : (ruleOf40 >= 25 ? 'output-value metric-warn' : 'output-value metric-bad');
        document.getElementById('gross-margin').className = (grossMargin >= 60) ? 'output-value metric-good' : (grossMargin >= 40 ? 'output-value metric-warn' : 'output-value metric-bad');

        // Call valuation function to update dependent outputs
        updateValuation(effectiveTotalRevenue, monthlyGrowth);
    }

    function updateValuation(currentRevenue, monthlyGrowth) {
        // --- Input Parsing ---
        const investmentAmount = parseFloat(document.getElementById('investment-amount').value) || 0;
        const equityStake = parseFloat(document.getElementById('equity-stake').value) / 100 || 0;
        const exitMultiple = parseFloat(document.getElementById('exit-multiple').value) || 0;
        const exitYear = parseFloat(document.getElementById('exit-year').value) || 5;

        // Get revenue from Step 5, if not passed (for initial load)
        if (!currentRevenue) {
            calculateMetrics();
            return; // Exit and let the recursive call handle it
        }
        
        // --- Step 1: Investment & Valuation Calculations ---

        // 1. Post-Money Valuation
        const postMoneyValuation = equityStake > 0 ? investmentAmount / equityStake : 0;
        document.getElementById('post-money-valuation').textContent = formatRupee(postMoneyValuation);

        // 2. Projected Exit Revenue (Compounded Annual Growth)
        // Convert Monthly Growth to Annual Growth Rate (CAGR)
        const annualGrowthRate = Math.pow(1 + monthlyGrowth, 12) - 1;
        // Project revenue from current monthly to annual (x12) in Year 0, then compound for exitYear
        const initialAnnualRevenue = currentRevenue * 12;
        const projectedExitRevenue = initialAnnualRevenue * Math.pow(1 + annualGrowthRate, exitYear);
        document.getElementById('projected-exit-revenue').textContent = formatRupee(projectedExitRevenue);

        // 3. Investor Exit Value
        const exitValuation = projectedExitRevenue * exitMultiple;
        const investorExitValue = exitValuation * equityStake;
        document.getElementById('investor-exit-value').textContent = formatRupee(investorExitValue);

        // 4. Multiple on Investment (MOI)
        const multipleOnInvestment = investmentAmount > 0 ? investorExitValue / investmentAmount : 0;
        document.getElementById('multiple-on-investment').textContent = multipleOnInvestment.toFixed(1) + 'x';
    }

    // Run calculations on page load
    document.addEventListener('DOMContentLoaded', () => {
        calculateMetrics();
    });
</script>

</body>
</html>
